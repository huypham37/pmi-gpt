# ACTIVE MEMORY: Issue #11
## Link
https://github.com/huypham37/pmi-gpt/issues/11
## Description
**Goal:** Add a new specialized UI mode for generating and managing security test cases (e.g., XSS, SQL injection) with a dedicated workflow separate from the standard chat view.

## Overview

This feature introduces a **Test Case Generator Mode** with 3 interconnected views:
1. **Test Case Generator Panel** - Input prompt + grid of generated test cases
2. **Test Case Card** - Collapsed summary view of a selected test case
3. **Report View** - Expanded detailed view with full test case information

## Current Step
Parser for AI markdown responses â†’ structured TestCase objects is implemented and tested (11/11 pass).

## Architecture Summary

### Data Layer
- **Types**: `TestCase`, `TestCaseMeta`, `TestCaseViewMode` in `apps/electron/src/shared/types.ts` (L431-L514)
- **Atoms**: `apps/electron/src/renderer/atoms/testcases.ts` â€” full Jotai atom family pattern (atomFamily + metaMap + ordered IDs + CRUD actions + disk persistence via IPC)
- **Mock data**: `apps/electron/src/renderer/components/testcases/mockTestCases.ts` â€” 6 realistic XSS test cases

### Navigation
- **Route**: `routes.view.testcases()` in `apps/electron/src/shared/routes.ts` (L154-L163)
- **Nav state**: `TestCasesNavigationState` with `isTestCasesNavigation()` guard
- **Routing**: `MainContentPanel.tsx` (L114-L125) renders `TestCaseGeneratorPage` when nav state matches

### UI Components (all in `apps/electron/src/renderer/`)
- **Page**: `pages/TestCaseGeneratorPage.tsx` â€” orchestrates gridâ†”report view switching, stub generation (1.5s delay, 2-4 fake test cases per prompt)
- **Grid**: `components/testcases/TestCaseGrid.tsx` â€” 2-column responsive grid of cards
- **Card**: `components/testcases/TestCaseCard.tsx` â€” compact card with name, target, ref badges, expand chevron
- **Report**: `components/testcases/TestCaseReportView.tsx` â€” full detail view with sections (Target, References, Description, Preconditions, Guidance, Expected/Actual)
- **Navigator**: `components/testcases/TestCasesNavigatorPanel.tsx` â€” left sidebar panel listing testcase sessions
- **Input**: Uses existing `InputContainer` with `compactMode` prop

### IPC (Electron)
- `window.electronAPI.saveTestCase()`, `.deleteTestCase()`, `.getTestCase()`, `.listTestCases()` â€” disk persistence

## Next Immediate
Wire the parser into `TestCaseGeneratorPage.handleSubmit` and replace stub generation with real ACP/OpenCode session calls.

## Plan
1. âœ… Define TestCase types and atoms
2. âœ… Implement navigation routes and state
3. âœ… Build TestCaseCard (grid item)
4. âœ… Build TestCaseGrid (card container)
5. âœ… Build TestCaseReportView (detail view)
6. âœ… Build TestCaseGeneratorPage (orchestrator with input + stub generation)
7. âœ… Build TestCasesNavigatorPanel (left sidebar)
8. âœ… Wire up MainContentPanel routing
9. âœ… Build AI response â†’ TestCase parser (`utils/testcase-parser.ts`, 11/11 tests pass)
10. ðŸ”² Integrate real AI generation via ACP session (replace stubs)
11. ðŸ”² Add delete/edit actions on test cases
12. ðŸ”² Add export functionality (CSV/JSON)

## Progress Log
